
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Web Scraping — Part 2 &#8212; Introduction to Cultural Analytics &amp; Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=200c6414" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-TLVVLVGVME"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TLVVLVGVME');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TLVVLVGVME');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '04-Data-Collection/03-Web-Scraping-Part2';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/custom.js?v=c326fd66"></script>
    <link rel="canonical" href="https://melaniewalsh.github.io/Intro-Cultural-Analytics/04-Data-Collection/03-Web-Scraping-Part2.html" />
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Git and GitHub" href="04-Git-GitHub.html" />
    <link rel="prev" title="Web Scraping — Part 1" href="02-Web-Scraping-Part1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../welcome.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/favicon.ico" class="logo__image only-light" alt="Introduction to Cultural Analytics & Python - Home"/>
    <script>document.write(`<img src="../_static/favicon.ico" class="logo__image only-dark" alt="Introduction to Cultural Analytics & Python - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">How To</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../How-To-Interact-With-This-Book.html">Interact With This Book</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The Course</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../course-schedule-2021.html">Course Schedule</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The Book</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01-Command-Line/01-The-Command-Line.html">1. The Command Line</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02-Python/00-Python.html">2. Python Basics</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/01-Install-Python.html">Install Python &amp; JupyterLab</a></li>

<li class="toctree-l2"><a class="reference internal" href="../02-Python/02-How-to-Use-Jupyter-Notebooks.html">How to Use Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/03-Anatomy-Python-Script.html">Anatomy of a Python Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/04-Variables.html">Python Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/05-Data-Types.html">Python Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/06-String-Methods.html">Python String Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/07-Files-Character-Encoding.html">Files and Character Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/08-Comparisons-Conditionals.html">Python Comparisons and Conditionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/09-Lists-Loops-Part1.html">Python Lists and Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/10-Lists-Loops-Part2.html">Python Lists and Loops (Cont.)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/11-Dictionaries.html">Python Dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/12-Functions.html">Python Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/13-Common-Python-Errors.html">Common Python Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02-Python/14-What-Were-Not-Covering.html">What We’re Not Covering</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../03-Data-Analysis/00-Data-Analysis.html">3. Data Analysis (Pandas)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../03-Data-Analysis/01-Pandas-Basics-Part1.html">Pandas Basics — Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-Data-Analysis/02-Pandas-Basics-Part2.html">Pandas Basics — Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-Data-Analysis/03-Pandas-Basics-Part3.html">Pandas Basics — Part 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03-Data-Analysis/04-Pandas-Merge-Datasets.html">Pandas — Merge Datasets</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="00-Data-Collection.html">4. Data Collection (Web Scraping, APIs, Social Media)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01-User-Ethics-Legal-Concerns.html">Users’ Data: Legal &amp; Ethical Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-Web-Scraping-Part1.html">Web Scraping — Part 1</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Web Scraping — Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-Git-GitHub.html">Git and GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="05-What-Is-API.html">Application Programming Interfaces (APIs)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="06-Song-Genius.html">Song Genius Data</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="07-Genius-API.html">Song Genius API</a></li>
<li class="toctree-l3"><a class="reference internal" href="08-Collect-Genius-Lyrics.html">Song Lyrics Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="09-Lyrics-Analysis.html">Song Lyrics Analysis</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="10-Twitter.html">Twitter Data</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="11-Twitter-API-Setup.html">Twitter API Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="12-Twitter-Data.html">Twitter Data Collection &amp; Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="13-Twitter-Data-Sharing.html">Twitter Data Sharing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="14-Reddit-Data.html">Reddit Data</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../05-Text-Analysis/00-Text-Analysis.html">5. Text Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../05-Text-Analysis/01-Multilingual-Text-Analysis.html">Working in Languages Beyond English</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Chinese/00-Chinese.html">Chinese</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Chinese/01-Preprocessing-Chinese.html">Text Pre-Processing for Chinese</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Chinese/02-Named-Entity-Recognition-Chinese.html">Named Entity Recognition for Chinese</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Chinese/03-POS-Keywords-Chinese.html">Part-of-Speech Tagging for Chinese</a></li>

</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Danish/00-Danish.html">Danish</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Danish/01-Preprocessing-Danish.html">Text Pre-Processing for Danish</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Danish/02-Named-Entity-Recognition-Danish.html">Named Entity Recognition for Danish</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Danish/03-POS-Keywords-Danish.html">Part-of-Speech Tagging for Danish</a></li>

</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Portuguese/00-Portuguese.html">Portuguese</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Portuguese/01-Preprocessing-Portuguese.html">Text Pre-Processing for Portuguese</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Portuguese/02-Named-Entity-Recognition-Portuguese.html">Named Entity Recognition for Portuguese</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Portuguese/03-POS-Keywords-Portuguese.html">Part-of-Speech Tagging for Portuguese</a></li>

</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Russian/00-Russian.html">Russian</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Russian/01-Preprocessing-Russian.html">Text Pre-Processing for Russian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Russian/02-Named-Entity-Recognition-Russian.html">Named Entity Recognition for Russian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Russian/03-POS-Keywords-Russian.html">Part-of-Speech Tagging for Russian</a></li>

</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Spanish/00-Spanish.html">Spanish</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Spanish/01-Preprocessing-Spanish.html">Text Pre-Processing for Spanish</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Spanish/02-Named-Entity-Recognition-Spanish.html">Named Entity Recognition for Spanish</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05-Text-Analysis/Multilingual/Spanish/03-POS-Keywords-Spanish.html">Part-of-Speech Tagging for Spanish</a></li>

</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../05-Text-Analysis/01-TF-IDF.html">Term-Frequency Inverse Document Frequency</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/02-TF-IDF-HathiTrust.html">With HathiTrust</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/03-TF-IDF-Scikit-Learn.html">With Scikit-Learn</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../05-Text-Analysis/04-Sentiment-Analysis.html">Sentiment Analysis</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../05-Text-Analysis/05-Topic-Modeling.html">Topic Modeling</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/06-Topic-Modeling-Overview.html">What is Topic Modeling?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/07-Topic-Modeling-Set-Up.html">MALLET Set Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/08-Topic-Modeling-Text-Files.html">MALLET &amp; Text Files (NYT Articles)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/09-Topic-Modeling-Without-Mallet.html">Tomotopy &amp; Text Files (NYT Articles) - No Java required</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/10-Topic-Modeling-CSV.html">MALLET &amp; CSV Files (Reddit Posts)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-Text-Analysis/11-Topic-Modeling-Time-Series.html">MALLET &amp; Time Series (Tweets)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../05-Text-Analysis/12-Named-Entity-Recognition.html">Named Entity Recognition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05-Text-Analysis/13-POS-Keywords.html">Part-of-Speech Tagging</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../06-Network-Analysis/00-Network-Analysis.html">6. Network Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../06-Network-Analysis/01-Network-Analysis.html">Network Analysis with NetworkX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06-Network-Analysis/02-Making-Network-Viz-with-Bokeh.html">Make an Interactive Network Visualization with Bokeh</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../07-Mapping/00-Mapping.html">7. Mapping</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../07-Mapping/01-Mapping.html">Mapping &amp; Geocoding</a></li>

<li class="toctree-l2"><a class="reference internal" href="../07-Mapping/02-Custom-Maps.html">Custom Map Backgrounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07-Mapping/03-Publish-Your-Map.html">Publish Your Map on the Web</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Datasets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../00-Datasets/00-Datasets.html">Datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extra Materials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02-Python/EXTRA-Jupyter-Tips-Tricks.html">Jupyter Tips &amp; Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-Python/EXTRA-Randomize-Students.html">Make Random Student Groups</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/melaniewalsh/Intro-Cultural-Analytics/master?urlpath=lab/tree/book/04-Data-Collection/03-Web-Scraping-Part2.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/melaniewalsh/Intro-Cultural-Analytics" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/melaniewalsh/Intro-Cultural-Analytics/issues/new?title=Issue%20on%20page%20%2F04-Data-Collection/03-Web-Scraping-Part2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/04-Data-Collection/03-Web-Scraping-Part2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Web Scraping — Part 2</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions">Regular Expressions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-regular-expressions-library">Import Regular Expressions Library</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replace-with-regex">Replace with Regex</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#special-regex-characters">Special RegEx Characters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compile-pattern">Compile Pattern</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#search-for-pattern">Search for Pattern</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#find-all-instances-of-pattern">Find All Instances of Pattern</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#match-before-a-certain-string">Match Before a Certain String</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backslash-escape-characters">Backslash Escape Characters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strip-leading-and-trailing-whitespace">Strip Leading and Trailing Whitespace</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-functions-and-put-it-all-together">Build Functions and Put It All Together</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#your-turn">Your Turn!</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="web-scraping-part-2">
<h1>Web Scraping — Part 2<a class="headerlink" href="#web-scraping-part-2" title="Link to this heading">#</a></h1>
<p>In this lesson, we’re going to learn more about scraping data with the Python libraries requests and BeautifulSoup. We’re also going to introduce <em>regular expressions</em>, which will help us extract and clean data in a more fine-grained way.</p>
<p>We will cover how to:</p>
<ul class="simple">
<li><p>Programmatically access the text of a web page</p></li>
<li><p>Extract certain HTML elements</p></li>
<li><p>Extract and clean data with regular expressions</p></li>
</ul>
<p>Our goal for this lesson is to build a web scraping function called <code class="docutils literal notranslate"><span class="pre">get_all_songs_from_album</span></code> which will get all the song titles from any album on <a class="reference external" href="http://Genius.com">Genius.com</a>.</p>
<hr class="docutils" />
<p><strong>Import Requests and BeautifulSoup</strong></p>
<p>We’re again going to use the <code class="docutils literal notranslate"><span class="pre">requests</span></code> library and the <code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code> library to scrape our list of album songs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
</div>
</div>
<img alt="../_images/Missy-Under-Construction.png" class="center" src="../_images/Missy-Under-Construction.png" />
<p>The first album that we’re going to scrape is Missy Elliott’s “Under Construction” (2002), which debuted at No. 3 on The Billboard Top 200 charts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">IFrame</span>
<span class="n">IFrame</span><span class="p">(</span><span class="s2">&quot;https://www.youtube.com/embed/cjIvu7e6Wq8?start=31&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;500&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
        <iframe
            width="500"
            height="400"
            src="https://www.youtube.com/embed/cjIvu7e6Wq8?start=31"
            frameborder="0"
            allowfullscreen
        ></iframe>
        </div></div>
</div>
<p><strong>Get HTML Data and Extract Text</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://genius.com/albums/Missy-elliott/Under-construction&quot;</span><span class="p">)</span>
<span class="n">html_string</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Transform into BeautifulSoup Document</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">document</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_string</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Your Turn!</strong></p>
<p>We want to extract just the song titles from Missy Elliott’s album “Under Construction.” Turn on your web browser’s “Inspect” function and find the HTML tag associated with each song title.</p>
<p><a class="reference external" href="https://genius.com/albums/Missy-elliott/Under-construction">https://genius.com/albums/Missy-elliott/Under-construction</a></p>
<p>Select “Click to show” to see the answer.</p>
<div class="cell tag_output_scroll tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">song_title_tags</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h3&quot;</span><span class="p">)</span>
<span class="n">song_title_tags</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Intro/Go To The Floor
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Bring the Pain (Ft. Method Man)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Gossip Folks (Ft. Ludacris)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Work It
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Back in the Day (Ft. JAY-Z)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Funky Fresh Dressed (Ft. Ms. Jade)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Pussycat
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Nothing Out There for Me (Ft. Beyoncé)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Slide
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Play That Beat
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Ain&#39;t That Funny
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Hot
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Can You Hear Me (Ft. TLC)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;chart_row-content-title&quot;&gt;
               Work It (Remix) (Ft. 50 Cent)
               &lt;span class=&quot;chart_row-content-title-subtitle&quot;&gt;Lyrics&lt;/span&gt;
 &lt;/h3&gt;,
 &lt;h3 class=&quot;annotation_label&quot;&gt;Does this album have any certifications?&lt;/h3&gt;,
 &lt;h3 class=&quot;annotation_label&quot;&gt;How did this album chart?&lt;/h3&gt;,
 &lt;h3&gt;ICONOLOGY&lt;/h3&gt;,
 &lt;h3&gt;Misdemeanor&lt;/h3&gt;]
</pre></div>
</div>
</div>
</details>
</div>
<p>Now write a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop that extracts the text from each song title tag and <code class="docutils literal notranslate"><span class="pre">.appends()</span></code> it to a list called <code class="docutils literal notranslate"><span class="pre">song_titles</span></code>:</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">song_titles</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">song_title_tags</span><span class="p">:</span>
    <span class="n">song_title_missy</span> <span class="o">=</span> <span class="n">song</span><span class="o">.</span><span class="n">text</span>
    <span class="n">song_titles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">song_title_missy</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">song_titles</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;\n              Intro/Go To The Floor\n              Lyrics\n&#39;,
 &#39;\n              Bring the Pain (Ft.\xa0Method\xa0Man)\n              Lyrics\n&#39;,
 &#39;\n              Gossip Folks (Ft.\xa0Ludacris)\n              Lyrics\n&#39;,
 &#39;\n              Work It\n              Lyrics\n&#39;,
 &#39;\n              Back in the Day (Ft.\xa0JAY-Z)\n              Lyrics\n&#39;,
 &#39;\n              Funky Fresh Dressed (Ft.\xa0Ms.\xa0Jade)\n              Lyrics\n&#39;,
 &#39;\n              Pussycat\n              Lyrics\n&#39;,
 &#39;\n              Nothing Out There for Me (Ft.\xa0Beyoncé)\n              Lyrics\n&#39;,
 &#39;\n              Slide\n              Lyrics\n&#39;,
 &#39;\n              Play That Beat\n              Lyrics\n&#39;,
 &quot;\n              Ain&#39;t That Funny\n              Lyrics\n&quot;,
 &#39;\n              Hot\n              Lyrics\n&#39;,
 &#39;\n              Can You Hear Me (Ft.\xa0TLC)\n              Lyrics\n&#39;,
 &#39;\n              Work It (Remix) (Ft.\xa050\xa0Cent)\n              Lyrics\n&#39;,
 &#39;Does this album have any certifications?&#39;,
 &#39;How did this album chart?&#39;,
 &#39;ICONOLOGY&#39;,
 &#39;Misdemeanor&#39;]
</pre></div>
</div>
</div>
</div>
<p>Now transform that same <code class="docutils literal notranslate"><span class="pre">for</span></code> loop into a list comprehension.</p>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missy_song_titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">song_title_tags</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missy_song_titles</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;\n              Intro/Go To The Floor\n              Lyrics\n&#39;,
 &#39;\n              Bring the Pain (Ft.\xa0Method\xa0Man)\n              Lyrics\n&#39;,
 &#39;\n              Gossip Folks (Ft.\xa0Ludacris)\n              Lyrics\n&#39;,
 &#39;\n              Work It\n              Lyrics\n&#39;,
 &#39;\n              Back in the Day (Ft.\xa0JAY-Z)\n              Lyrics\n&#39;,
 &#39;\n              Funky Fresh Dressed (Ft.\xa0Ms.\xa0Jade)\n              Lyrics\n&#39;,
 &#39;\n              Pussycat\n              Lyrics\n&#39;,
 &#39;\n              Nothing Out There for Me (Ft.\xa0Beyoncé)\n              Lyrics\n&#39;,
 &#39;\n              Slide\n              Lyrics\n&#39;,
 &#39;\n              Play That Beat\n              Lyrics\n&#39;,
 &quot;\n              Ain&#39;t That Funny\n              Lyrics\n&quot;,
 &#39;\n              Hot\n              Lyrics\n&#39;,
 &#39;\n              Can You Hear Me (Ft.\xa0TLC)\n              Lyrics\n&#39;,
 &#39;\n              Work It (Remix) (Ft.\xa050\xa0Cent)\n              Lyrics\n&#39;,
 &#39;Does this album have any certifications?&#39;,
 &#39;How did this album chart?&#39;,
 &#39;ICONOLOGY&#39;,
 &#39;Misdemeanor&#39;]
</pre></div>
</div>
</div>
</div>
<p>Are there things in your list that aren’t song titles? If so, use <code class="docutils literal notranslate"><span class="pre">.find_all()</span></code> with more specific HTML attributes <code class="docutils literal notranslate"><span class="pre">attrs={}</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">song_title_tags</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h3&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;chart_row-content-title&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="n">missy_song_titles</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;\n              Intro/Go To The Floor\n              Lyrics\n&#39;,
 &#39;\n              Bring the Pain (Ft.\xa0Method\xa0Man)\n              Lyrics\n&#39;,
 &#39;\n              Gossip Folks (Ft.\xa0Ludacris)\n              Lyrics\n&#39;,
 &#39;\n              Work It\n              Lyrics\n&#39;,
 &#39;\n              Back in the Day (Ft.\xa0JAY-Z)\n              Lyrics\n&#39;,
 &#39;\n              Funky Fresh Dressed (Ft.\xa0Ms.\xa0Jade)\n              Lyrics\n&#39;,
 &#39;\n              Pussycat\n              Lyrics\n&#39;,
 &#39;\n              Nothing Out There for Me (Ft.\xa0Beyoncé)\n              Lyrics\n&#39;,
 &#39;\n              Slide\n              Lyrics\n&#39;,
 &#39;\n              Play That Beat\n              Lyrics\n&#39;,
 &quot;\n              Ain&#39;t That Funny\n              Lyrics\n&quot;,
 &#39;\n              Hot\n              Lyrics\n&#39;,
 &#39;\n              Can You Hear Me (Ft.\xa0TLC)\n              Lyrics\n&#39;,
 &#39;\n              Work It (Remix) (Ft.\xa050\xa0Cent)\n              Lyrics\n&#39;,
 &#39;\n              Pepsi Super Bowl XLIX Halftime Show by\xa0NFL (Ft.\xa0Katy\xa0Perry, Lenny\xa0Kravitz &amp; Missy\xa0Elliott)\n              Lyrics\n&#39;]
</pre></div>
</div>
</div>
</div>
<section id="regular-expressions">
<h2>Regular Expressions<a class="headerlink" href="#regular-expressions" title="Link to this heading">#</a></h2>
<p>Great! Now we have have our list of song titles from Missy Elliot’s album “Under Construction.” But if you notice, these song titles are pretty messy, and we need to clean them up.</p>
<p>To do so, we’re going to use built-in string methods and a Python library called <code class="docutils literal notranslate"><span class="pre">re</span></code>, short for regular expressions.</p>
<p>Regular expressions are basically like a very sophisticated find-and-replace. Regular expression are not exclusive to Python and are used in many programming languages as well as in search engines, text editors, and word processors.</p>
<section id="import-regular-expressions-library">
<h3>Import Regular Expressions Library<a class="headerlink" href="#import-regular-expressions-library" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
</pre></div>
</div>
</div>
</div>
<p>To practice with regular expressions, we’re going to use a sample messy song title from our messy song titles list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_song</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">              Back in the Day (Ft.</span><span class="se">\xa0</span><span class="s2">JAY-Z)</span><span class="se">\n</span><span class="s2">              Lyrics</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Replace with Python String Method</strong></p>
<p>Remember the string method <code class="docutils literal notranslate"><span class="pre">.replace()</span></code>? With this built-in string method, we can easily get rid of the new line characters <code class="docutils literal notranslate"><span class="pre">\n</span></code> or the word “Lyrics” from our <code class="docutils literal notranslate"><span class="pre">sample_song</span></code>, which is very useful.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_song</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;              Back in the Day (Ft.\xa0JAY-Z)              Lyrics&#39;
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_song</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Lyrics&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;\n              Back in the Day (Ft.\xa0JAY-Z)\n              \n&#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="replace-with-regex">
<h3>Replace with Regex<a class="headerlink" href="#replace-with-regex" title="Link to this heading">#</a></h3>
<p>However, with regular expressions, we can replace strings with even more power and flexibility.</p>
<p>To replace a string with regular expressions, we use <code class="docutils literal notranslate"><span class="pre">re.sub(old_pattern,</span> <span class="pre">new_pattern,</span> <span class="pre">text_that_contains_pattern)</span></code>. We can do exactly the same thing that we did with the built-in string method <code class="docutils literal notranslate"><span class="pre">.replace()</span></code>.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_song</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;\n              Back in the Day (Ft.\xa0JAY-Z)\n              Lyrics\n&#39;
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;              Back in the Day (Ft.\xa0JAY-Z)              Lyrics&#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
</section>
<section id="special-regex-characters">
<h2>Special RegEx Characters<a class="headerlink" href="#special-regex-characters" title="Link to this heading">#</a></h2>
<p>But regular expressions have certain characters with special pattern-matching powers, which is what allows us to do more cleaning, manipulating, and searching than with basic string methods. Below are some of the special regular expression characters.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Regular Expression Pattern</p></th>
<th class="head text-center"><p>Matches</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
<td class="text-center"><p>any character</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">\w</span></code></p></td>
<td class="text-center"><p>word</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">\W</span></code></p></td>
<td class="text-center"><p>NOT word</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">\d</span></code></p></td>
<td class="text-center"><p>digit</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">\D</span></code></p></td>
<td class="text-center"><p>NOT digit</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">\s</span></code></p></td>
<td class="text-center"><p>whitespace</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">\S</span></code></p></td>
<td class="text-center"><p>NOT whitespace</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">[abc]</span></code></p></td>
<td class="text-center"><p>Any of abc</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">[^abc]</span></code></p></td>
<td class="text-center"><p>Not any of abc</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">(abc)</span></code></p></td>
<td class="text-center"><p>Specific capture of “abc”</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td class="text-center"><p>1 or more instances</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td class="text-center"><p>0 or more instances</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
<td class="text-center"><p>0 or 1 instance</p></td>
</tr>
</tbody>
</table>
<p>You can explore and experiment with regular expression characters and combinations at <a class="reference external" href="https://regexr.com/4vhf1">Regexr.com</a>.</p>
<p>We can replace anything that is not a word <code class="docutils literal notranslate"><span class="pre">\W</span></code> with “ “:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;\W&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;               Back in the Day  Ft  JAY Z                Lyrics &#39;
</pre></div>
</div>
</div>
</details>
</div>
<p>Replace anything that is a word <code class="docutils literal notranslate"><span class="pre">\w</span></code> with “ “:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;\w&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;\n                              (  .\xa0   - )\n                    \n&#39;
</pre></div>
</div>
</div>
</details>
</div>
<p>The character <code class="docutils literal notranslate"><span class="pre">+</span></code> means “match one or more instance” of the pattern, which allows us to remove multiple not word patterns in a row.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;\W+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; Back in the Day Ft JAY Z Lyrics &#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="compile-pattern">
<h2>Compile Pattern<a class="headerlink" href="#compile-pattern" title="Link to this heading">#</a></h2>
<p>An efficient way to build and save a regular expression pattern is with <code class="docutils literal notranslate"><span class="pre">re.compile()</span></code></p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">not_word_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;\W+&quot;</span><span class="p">)</span>
<span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">not_word_pattern</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; Back in the Day Ft JAY Z Lyrics &#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="search-for-pattern">
<h2>Search for Pattern<a class="headerlink" href="#search-for-pattern" title="Link to this heading">#</a></h2>
<p>In addition to replacing text, we can also find and return text. With <code class="docutils literal notranslate"><span class="pre">re.search()</span></code>, we can find and return any particular pattern. The <code class="docutils literal notranslate"><span class="pre">re.search()</span></code> function returns something called a “match object,” which we can access with <code class="docutils literal notranslate"><span class="pre">.group()</span></code>.</p>
<p>For example, searching with the pattern <code class="docutils literal notranslate"><span class="pre">\w+</span></code> will return the very first word in <code class="docutils literal notranslate"><span class="pre">sample_song</span></code>:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">word_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;\w+&quot;</span><span class="p">)</span>
<span class="n">word_pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;re.Match object; span=(15, 19), match=&#39;Back&#39;&gt;
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">word_pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">sample_song</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Back&#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="find-all-instances-of-pattern">
<h2>Find All Instances of Pattern<a class="headerlink" href="#find-all-instances-of-pattern" title="Link to this heading">#</a></h2>
<p>The function <code class="docutils literal notranslate"><span class="pre">re.findall()</span></code> will return a list of every instance of a particular pattern.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">word_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;\w+&quot;</span><span class="p">)</span>
<span class="n">word_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">sample_song</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Back&#39;, &#39;in&#39;, &#39;the&#39;, &#39;Day&#39;, &#39;Ft&#39;, &#39;JAY&#39;, &#39;Z&#39;, &#39;Lyrics&#39;]
</pre></div>
</div>
</div>
</details>
</div>
<p>When you combine special regular expression characters, you can make your pattern matching very specific and very powerful. If we had a document that contains a bunch of email addresses, we could use the pattern <code class="docutils literal notranslate"><span class="pre">[\w.]+&#64;[\w.]+</span></code> to find and extract the words that appear on other side of the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> character, aka <a class="reference external" href="https://regexr.com/4vhfa">find and extract all the email addresses</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text_with_emails</span> <span class="o">=</span> <span class="s2">&quot;The important email addresses are important@cool.com, signficant@sweet.org&quot;</span>
<span class="n">extracted_emails</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;[\w.]+@[\w.]+&#39;</span><span class="p">,</span> <span class="n">text_with_emails</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">extracted_emails</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;important@cool.com&#39;, &#39;signficant@sweet.org&#39;]
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="match-before-a-certain-string">
<h2>Match Before a Certain String<a class="headerlink" href="#match-before-a-certain-string" title="Link to this heading">#</a></h2>
<p>For our song titles, we might want to <a class="reference internal" href="#regexr.com/4vhfg"><span class="xref myst">extract everything that comes before “(Ft.)”</span></a> because we don’t care as much about the featured artists, and because the featured artists makes the song titles really long. To match everything that comes before a certain string, we can use the pattern <code class="docutils literal notranslate"><span class="pre">.*(?=desired_pattern)</span></code> which matches 0 or more <code class="docutils literal notranslate"><span class="pre">*</span></code> of any character <code class="docutils literal notranslate"><span class="pre">.</span></code> that comes before <code class="docutils literal notranslate"><span class="pre">(?=)</span></code> the string “desired_pattern.”</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">before_ft_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;.*(?=Ft)&quot;</span><span class="p">)</span>
<span class="n">before_ft_pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">sample_song</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;              Back in the Day (&#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="backslash-escape-characters">
<h2>Backslash Escape Characters<a class="headerlink" href="#backslash-escape-characters" title="Link to this heading">#</a></h2>
<p>Nice! We got everything before the featured artist. Well, almost. We still have a weird, lingering open parentheses. That’s because we were matching “Ft” not “(Ft”. Let’s match everything before “(Ft” instead.</p>
<p>To do so, we’re going to have to make a slight adjustment. Remember that parentheses <code class="docutils literal notranslate"><span class="pre">()</span></code> are special regular expression characters. To make clear that we mean a literal parentheses and not a special regular expression character, we have to use an escape backslash <code class="docutils literal notranslate"><span class="pre">\</span></code> before the character.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">before_ft_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;.*(?=\(Ft)&quot;</span><span class="p">)</span>
<span class="n">clean_sample_song_title</span> <span class="o">=</span> <span class="n">before_ft_pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">sample_song</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">clean_sample_song_title</span> 
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;              Back in the Day &#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="strip-leading-and-trailing-whitespace">
<h2>Strip Leading and Trailing Whitespace<a class="headerlink" href="#strip-leading-and-trailing-whitespace" title="Link to this heading">#</a></h2>
<p>The last thing we’ll do to clean up our song title is to use the built-in string method <code class="docutils literal notranslate"><span class="pre">.strip()</span></code> which strips leading and trailing whitespace.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">clean_sample_song_title</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Back in the Day&#39;
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="build-functions-and-put-it-all-together">
<h2>Build Functions and Put It All Together<a class="headerlink" href="#build-functions-and-put-it-all-together" title="Link to this heading">#</a></h2>
<p>Let’s put all this cleaning together in a function called <code class="docutils literal notranslate"><span class="pre">clean_up</span></code>. It will match and strip everything before “(Ft.)” if the song title contains a featured artist, and it will remove the word “Lyrics” and strip whitespace if the song title does not contain “(Ft.)”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">clean_up</span><span class="p">(</span><span class="n">song_title</span><span class="p">):</span>

    <span class="k">if</span> <span class="s2">&quot;Ft&quot;</span> <span class="ow">in</span> <span class="n">song_title</span><span class="p">:</span>
        <span class="n">before_ft_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;.*(?=\(Ft)&quot;</span><span class="p">)</span>
        <span class="n">song_title_before_ft</span> <span class="o">=</span> <span class="n">before_ft_pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">song_title</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">clean_song_title</span> <span class="o">=</span> <span class="n">song_title_before_ft</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
    <span class="k">else</span><span class="p">:</span>
        <span class="n">song_title_no_lyrics</span> <span class="o">=</span> <span class="n">song_title</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Lyrics&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">clean_song_title</span> <span class="o">=</span> <span class="n">song_title_no_lyrics</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">clean_song_title</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">clean_up</span><span class="p">(</span><span class="n">song</span><span class="p">)</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">missy_song_titles</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Intro/Go To The Floor&#39;,
 &#39;Bring the Pain&#39;,
 &#39;Gossip Folks&#39;,
 &#39;Work It&#39;,
 &#39;Back in the Day&#39;,
 &#39;Funky Fresh Dressed&#39;,
 &#39;Pussycat&#39;,
 &#39;Nothing Out There for Me&#39;,
 &#39;Slide&#39;,
 &#39;Play That Beat&#39;,
 &quot;Ain&#39;t That Funny&quot;,
 &#39;Hot&#39;,
 &#39;Can You Hear Me&#39;,
 &#39;Work It (Remix)&#39;,
 &#39;Pepsi Super Bowl XLIX Halftime Show by\xa0NFL&#39;]
</pre></div>
</div>
</div>
</div>
<p>We were able to extract the song titles for Missy Elliott’s album “Under Construction.” Success! But now we want to make a function that can do the same thing for any artist and album title.</p>
<p>Take a look at <a class="reference external" href="https://genius.com/albums/Beyonce/Lemonade">Beyonce’s album “Lemonade”</a> on <a class="reference external" href="http://Genius.com">Genius.com</a> and see how the web page compares to Missy Elliott’s “Under Construction.” They look extremely similar, right? Because all Genius album pages are identical, we can use the same code that we did for Missy Elliott and just substitute in different artist and album names with an f-string for the Genius URL:</p>
<p><code class="docutils literal notranslate"><span class="pre">f&quot;https://genius.com/albums/{artist}/{album_name}&quot;</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_all_songs_from_album</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">album_name</span><span class="p">):</span>
    
    <span class="n">artist</span> <span class="o">=</span> <span class="n">artist</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
    <span class="n">album_name</span> <span class="o">=</span> <span class="n">album_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span>
    
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://genius.com/albums/</span><span class="si">{</span><span class="n">artist</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">album_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">html_string</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
    <span class="n">document</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_string</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">song_title_tags</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h3&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;chart_row-content-title&quot;</span><span class="p">})</span>
    <span class="n">song_titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">song_title</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">song_title</span> <span class="ow">in</span> <span class="n">song_title_tags</span><span class="p">]</span>
    
    <span class="n">clean_songs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">song_title</span> <span class="ow">in</span> <span class="n">song_titles</span><span class="p">:</span>
        <span class="n">clean_song</span> <span class="o">=</span> <span class="n">clean_up</span><span class="p">(</span><span class="n">song_title</span><span class="p">)</span>
        <span class="n">clean_songs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clean_song</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">clean_songs</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_all_songs_from_album</span><span class="p">(</span><span class="s1">&#39;Beyonce&#39;</span><span class="p">,</span> <span class="s1">&#39;Lemonade&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Pray You Catch Me&#39;,
 &#39;Hold Up&#39;,
 &quot;Don&#39;t Hurt Yourself&quot;,
 &#39;Sorry&#39;,
 &#39;6 Inch&#39;,
 &#39;Daddy Lessons&#39;,
 &#39;Love Drought&#39;,
 &#39;Sandcastles&#39;,
 &#39;Forward&#39;,
 &#39;Freedom&#39;,
 &#39;All Night&#39;,
 &#39;Formation&#39;,
 &#39;Sorry (Original Demo)&#39;,
 &#39;Lemonade Film (Script)&#39;]
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_all_songs_from_album</span><span class="p">(</span><span class="s1">&#39;Taylor Swift&#39;</span><span class="p">,</span> <span class="s1">&#39;Red&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;State of Grace&#39;,
 &#39;Red&#39;,
 &#39;Treacherous&#39;,
 &#39;I Knew You Were Trouble&#39;,
 &#39;All Too Well&#39;,
 &#39;22&#39;,
 &#39;I Almost Do&#39;,
 &#39;We Are Never Ever Getting Back Together&#39;,
 &#39;Stay Stay Stay&#39;,
 &#39;The Last Time&#39;,
 &#39;Holy Ground&#39;,
 &#39;Sad Beautiful Tragic&#39;,
 &#39;The Lucky One&#39;,
 &#39;Everything Has Changed&#39;,
 &#39;Starlight&#39;,
 &#39;Begin Again&#39;,
 &#39;I Knew You Were Trouble (Intro)&#39;]
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_all_songs_from_album</span><span class="p">(</span><span class="s1">&#39;Mitski&#39;</span><span class="p">,</span> <span class="s1">&#39;Be The Cowboy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Geyser&#39;,
 &quot;Why Didn&#39;t You Stop Me?&quot;,
 &#39;Old Friend&#39;,
 &#39;A Pearl&#39;,
 &#39;Lonesome Love&#39;,
 &#39;Remember My Name&#39;,
 &#39;Me and My Husband&#39;,
 &#39;Come Into the Water&#39;,
 &#39;Nobody&#39;,
 &#39;Pink in the Night&#39;,
 &#39;A Horse Named Cold Air&#39;,
 &#39;Washing Machine Heart&#39;,
 &#39;Blue Light&#39;,
 &#39;Two Slow Dancers&#39;]
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="your-turn">
<h2>Your Turn!<a class="headerlink" href="#your-turn" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_all_songs_from_album</span><span class="p">(</span><span class="s1">&#39;#Your Choice of Artist&#39;</span><span class="p">,</span> <span class="s1">&#39;#Your Choice of Album&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./04-Data-Collection"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="02-Web-Scraping-Part1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Web Scraping — Part 1</p>
      </div>
    </a>
    <a class="right-next"
       href="04-Git-GitHub.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Git and GitHub</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions">Regular Expressions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-regular-expressions-library">Import Regular Expressions Library</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#replace-with-regex">Replace with Regex</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#special-regex-characters">Special RegEx Characters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compile-pattern">Compile Pattern</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#search-for-pattern">Search for Pattern</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#find-all-instances-of-pattern">Find All Instances of Pattern</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#match-before-a-certain-string">Match Before a Certain String</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backslash-escape-characters">Backslash Escape Characters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strip-leading-and-trailing-whitespace">Strip Leading and Trailing Whitespace</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-functions-and-put-it-all-together">Build Functions and Put It All Together</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#your-turn">Your Turn!</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By <a href="https://melaniewalsh.org/">Melanie Walsh</a>
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
<a href="https://web.archive.org/web/20230314182511/http://dhawards.org/dhawards2021/results/">🏆</a> Winner of "Best DH Training Material" 2021.<br>
<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> This book is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons BY-NC-SA 4.0 License</a>.  
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>